<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Conditional Display</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../acknowledgments.html"><strong aria-hidden="true">2.</strong> Acknowledgments</a></li><li class="chapter-item expanded "><a href="../text-and-links/index.html"><strong aria-hidden="true">3.</strong> Text and Links</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../text-and-links/text-formatting.html"><strong aria-hidden="true">3.1.</strong> Text Formatting</a></li><li class="chapter-item expanded "><a href="../text-and-links/simple-links.html"><strong aria-hidden="true">3.2.</strong> Simple Links</a></li><li class="chapter-item expanded "><a href="../text-and-links/forks.html"><strong aria-hidden="true">3.3.</strong> Forks</a></li><li class="chapter-item expanded "><a href="../text-and-links/ways-to-link.html"><strong aria-hidden="true">3.4.</strong> Ways to Link</a></li><li class="chapter-item expanded "><a href="../text-and-links/backstage.html"><strong aria-hidden="true">3.5.</strong> Introducing Backstage</a></li></ol></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/index.html"><strong aria-hidden="true">4.</strong> Modifiers and Inserts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modifiers-and-inserts/modifiers-and-text-alignment.html"><strong aria-hidden="true">4.1.</strong> Modifiers and Text Alignment</a></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/delayed-text.html"><strong aria-hidden="true">4.2.</strong> Delayed Text</a></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/notes.html"><strong aria-hidden="true">4.3.</strong> Notes</a></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/link-inserts.html"><strong aria-hidden="true">4.4.</strong> Link Inserts</a></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/reveal-links.html"><strong aria-hidden="true">4.5.</strong> Reveal Links</a></li><li class="chapter-item expanded "><a href="../modifiers-and-inserts/embedding-passages.html"><strong aria-hidden="true">4.6.</strong> Embedding Passages</a></li></ol></li><li class="chapter-item expanded "><a href="../state/index.html"><strong aria-hidden="true">5.</strong> Adding State to Stories</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../state/what-is-state.html"><strong aria-hidden="true">5.1.</strong> What is State?</a></li><li class="chapter-item expanded "><a href="../state/the-vars-section.html"><strong aria-hidden="true">5.2.</strong> The Vars Section</a></li><li class="chapter-item expanded "><a href="../state/displaying-variables.html"><strong aria-hidden="true">5.3.</strong> Displaying Variables</a></li><li class="chapter-item expanded "><a href="../state/conditional-display.html" class="active"><strong aria-hidden="true">5.4.</strong> Conditional Display</a></li><li class="chapter-item expanded "><a href="../state/conditions-and-variables.html"><strong aria-hidden="true">5.5.</strong> Conditions and Variables</a></li><li class="chapter-item expanded "><a href="../state/continuity.html"><strong aria-hidden="true">5.6.</strong> Continuity Between Sessions</a></li><li class="chapter-item expanded "><a href="../state/backstage.html"><strong aria-hidden="true">5.7.</strong> State Backstage</a></li><li class="chapter-item expanded "><a href="../state/objects-and-lookups.html"><strong aria-hidden="true">5.8.</strong> Objects and Lookup Variables</a></li><li class="chapter-item expanded "><a href="../state/randomness.html"><strong aria-hidden="true">5.9.</strong> Randomness</a></li></ol></li><li class="chapter-item expanded "><a href="../multimedia/index.html"><strong aria-hidden="true">6.</strong> Multimedia</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../multimedia/publishing-models.html"><strong aria-hidden="true">6.1.</strong> Publishing Models</a></li><li class="chapter-item expanded "><a href="../multimedia/images.html"><strong aria-hidden="true">6.2.</strong> Images</a></li><li class="chapter-item expanded "><a href="../multimedia/audio.html"><strong aria-hidden="true">6.3.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../multimedia/video.html"><strong aria-hidden="true">6.4.</strong> Video</a></li></ol></li><li class="chapter-item expanded "><a href="../customization/index.html"><strong aria-hidden="true">7.</strong> Customization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customization/header-and-footer.html"><strong aria-hidden="true">7.1.</strong> The Header and Footer</a></li><li class="chapter-item expanded "><a href="../customization/fonts-and-colors.html"><strong aria-hidden="true">7.2.</strong> Fonts and Colors</a></li><li class="chapter-item expanded "><a href="../customization/external-web-fonts.html"><strong aria-hidden="true">7.3.</strong> External Web Fonts</a></li><li class="chapter-item expanded "><a href="../customization/page-style.html"><strong aria-hidden="true">7.4.</strong> Page Style</a></li><li class="chapter-item expanded "><a href="../customization/fork-style.html"><strong aria-hidden="true">7.5.</strong> Fork Style</a></li><li class="chapter-item expanded "><a href="../customization/design-considerations.html"><strong aria-hidden="true">7.6.</strong> Design Considerations</a></li></ol></li><li class="chapter-item expanded "><a href="../player-input/index.html"><strong aria-hidden="true">8.</strong> Player Input</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../player-input/text-input.html"><strong aria-hidden="true">8.1.</strong> Text Input</a></li><li class="chapter-item expanded "><a href="../player-input/dropdown-menus-cycling-links.html"><strong aria-hidden="true">8.2.</strong> Dropdown Menus and Cycling Links</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced/index.html"><strong aria-hidden="true">9.</strong> Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced/using-javascript-in-passages.html"><strong aria-hidden="true">9.1.</strong> Using JavaScript in Passages</a></li><li class="chapter-item expanded "><a href="../advanced/using-css-in-passages.html"><strong aria-hidden="true">9.2.</strong> Using CSS in Passages</a></li><li class="chapter-item expanded "><a href="../advanced/adding-custom-inserts.html"><strong aria-hidden="true">9.3.</strong> Adding Custom Inserts</a></li><li class="chapter-item expanded "><a href="../advanced/adding-custom-modifiers.html"><strong aria-hidden="true">9.4.</strong> Adding Custom Modifiers</a></li></ol></li><li class="chapter-item expanded "><a href="../references/index.html"><strong aria-hidden="true">10.</strong> References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../references/inserts.html"><strong aria-hidden="true">10.1.</strong> Inserts</a></li><li class="chapter-item expanded "><a href="../references/modifiers.html"><strong aria-hidden="true">10.2.</strong> Modifiers</a></li><li class="chapter-item expanded "><a href="../references/version-history.html"><strong aria-hidden="true">10.3.</strong> Version History</a></li><li class="chapter-item expanded "><a href="../references/lifecycle.html"><strong aria-hidden="true">10.4.</strong> The Chapbook Lifecycle</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="conditional-display"><a class="header" href="#conditional-display">Conditional Display</a></h1>
<p>The other common use of variables in stories is to block off access to a branch, or conversely unlock a hidden part of a story. In order to do this with Chapbook, you'll need to combine a variable with a modifier.</p>
<p>For instance, let's say you have a passage where the protagonist finds a key hidden in the weeds:</p>
<pre><code>hasKey: true
--
It's the strangest thing: there, in the weeds that surround the base of the tree, is a single rusted key.

After picking it up, you decide to [[move on]].
</code></pre>
<p>Then later in the story, when the protagonist encounters the door the key belongs to:</p>
<pre><code>At the end of the hall, you find a featureless steel door.

[if hasKey]
You could try [[unlocking it]] with the key you found.

[continue]
You consider [[turning back]].
</code></pre>
<p>Only if the player had found the key earlier do they see &quot;You could try unlocking it with the key you found,&quot; but in all cases they see &quot;You consider turning back.&quot; The <code>if</code> modifier only displays the text below it if the expression in the modifier evaluates to true. You can enter anything that eventually evaluates to a boolean<sup class="footnote-reference"><a href="#1">1</a></sup>. Some more examples:</p>
<ul>
<li><code>[if stringVariable === 'red']</code></li>
<li><code>[if dollarsInPocket &gt; 5]</code></li>
<li><code>[if 2 + 2 === 4]</code></li>
</ul>
<h2 id="unless-conditions"><a class="header" href="#unless-conditions">Unless Conditions</a></h2>
<p>In certain cases, it's more expressive to use an <code>unless</code> instead of an <code>if</code>.</p>
<pre><code>[unless tookAntidote]
You've run out of time. Your breath catches in your throat; your body slips from the chair, and the world turns dark.
</code></pre>
<p><code>unless</code> modifiers work exactly the same as <code>if</code> ones, only they display the text following them if their condition evaluates to false.</p>
<h2 id="else-conditions"><a class="header" href="#else-conditions">Else Conditions</a></h2>
<p>The wording of the first example in this section is a bit awkward. We could make it flow better using an <code>else</code> modifier:</p>
<pre><code>[if hasKey]
You could try [[unlocking it]] with the the key you found, or just [[turn back]].

[else]
Nothing to do here but [[turn back]].
</code></pre>
<p><code>else</code> modifiers display the text following them if the previous <code>if</code> did not display. They have no relationship with <code>unless</code> conditions. <code>else</code>s also only apply on a per-passage basis; if you use an <code>if</code> in one passage, you cannot place the matching <code>else</code> in a different passage. If you find yourself wanting to do something along these lines, instead repeat the same condition in the second passage and use an <code>unless</code> instead of an <code>if</code>.</p>
<h2 id="modifiers-including-conditional-ones-cannot-be-nested"><a class="header" href="#modifiers-including-conditional-ones-cannot-be-nested">Modifiers (Including Conditional Ones) Cannot Be Nested</a></h2>
<p>It is not possible to directly nest conditional modifiers in Chapbook. Meaning:</p>
<pre><code>[if hasKey]
You could [[open the door]]...

[if monsterDistance &lt; 2]
... and it might be your best chance for survival.
</code></pre>
<p>Would, if <code>hasKey</code> is false and <code>monsterDistance</code> is 1, only display:</p>
<pre><code>... and it might be your best chance for survival.
</code></pre>
<p>This is because modifiers only affect the text directly following them. They do not affect modifiers before or after them in the text, or any other text. You should instead write:</p>
<pre><code>[if hasKey]
You could [[open the door]]...

[if hasKey &amp;&amp; monsterDistance &lt; 2]
... and it might be your best chance for survival.
</code></pre>
<p>Let's take a more complicated example:</p>
<ul>
<li>The player must have first found a certain secret door by looking.</li>
<li>Once found, the door can only be unlocked with a key they previously found.</li>
<li>Once unlocked, the door remains open.</li>
</ul>
<p>This might be written in the popular SugarCube story format as:</p>
<pre><code>&lt;&lt;if $doorFound&gt;&gt;
&lt;&lt;if $doorUnlocked&gt;&gt;
The door stands open and unlocked, ready for you to [[enter it]].
&lt;&lt;else&gt;&gt;
You've found a door here, &lt;&lt;if $hasKey&gt;&gt;ready to be [[unlocked]]&lt;&lt;else&gt;&gt;but you haven't found a key yet that will open it.
&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
There seems to be nothing of note here, but perhaps [[a search would turn up something]].
&lt;&lt;/if&gt;&gt;
</code></pre>
<p>(This example omits, for brevity's sake, the other passages where <code>$doorFound</code> and <code>$hasKey</code> would be set.)</p>
<p>In Chapbook, you could instead use temporary variables to simplify some of the logic of the passage, and write:</p>
<pre><code>_doorOpen: doorFound &amp;&amp; doorUnlocked
_doorLocked: doorFound &amp;&amp; !doorUnlocked
--
[if _doorOpen]
The door stands open and unlocked, ready for you to [[enter it]].

[if _doorLocked]
You've found a door here,

[if _doorLocked &amp;&amp; hasKey; append]
ready to be [[unlocked]].

[if _doorLocked &amp;&amp; !hasKey; append]
but you haven't found a key yet that will open it.

[if !doorFound]
There seems to be nothing of note here, but perhaps [[a search would turn up something]].
</code></pre>
<p>Remember that <code>doorFound</code>, <code>doorUnlocked</code>, and <code>hasKey</code> are set in other passages. And beware--you cannot use an <code>[else]</code> in front of <code>but you haven't found a key yet that will open it.</code> The <code>else</code> will display in all cases that the <code>[if]</code> does not, even when <code>doorFound</code> is <code>false</code>.</p>
<p>An alternate method is to move parts of your logic to a separate passage and [embed it][embed-passage]:</p>
<pre><code>_doorOpen: doorFound &amp;&amp; doorUnlocked
_doorLocked: doorFound &amp;&amp; !doorUnlocked
--
[if doorFound &amp;&amp; doorUnlocked]
The door stands open and unlocked, ready for you to [[enter it]].

[if doorFound &amp;&amp; !doorUnlocked]
{embed passage: 'locked door logic'}

[if !doorFound]
There seems to be nothing of note here, but perhaps [[a search would turn up something]].
</code></pre>
<p>Which approach is best to take depends on the situation. It's not a good idea to embed passages more than one level deep.</p>
<h2 id="disabling-conditions-for-testing"><a class="header" href="#disabling-conditions-for-testing">Disabling Conditions For Testing</a></h2>
<p>It can be useful to override a conditional modifier so that it always or never displays, regardless of circumstances. To do this, change <code>[if]</code> to either <code>[ifalways]</code> or <code>[ifnever]</code>.</p>
<pre><code>[ifnever 1 + 1 === 2]
This would have been shown with a regular [if], but isn't.
</code></pre>
<p>This affects any <code>[else]</code> modifiers that follow it.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Truthfully, it is also possible to write <code>[if stringVariable]</code> or <code>[if 2 + 2]</code>. In these cases, any non-empty string (e.g. not <code>''</code>) is treated as true, and any non-zero number is treated as true. It's best to be explicit, however, and write <code>[if stringVariable !== '']</code> and <code>[if 2 + 2 !== 0]</code>.
[embed-passage]: ../text-and-links/embedding-passages.html</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../state/displaying-variables.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../state/conditions-and-variables.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../state/displaying-variables.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../state/conditions-and-variables.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
